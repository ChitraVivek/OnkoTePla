<UserControl x:Class="bytePassion.OnkoTePla.Client.WPFVisualization.Views.AppointmentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:sampleData="clr-namespace:bytePassion.OnkoTePla.Client.WPFVisualization.SampleData"
             xmlns:converter="clr-namespace:bytePassion.OnkoTePla.Client.WPFVisualization.Converter"
             xmlns:behaviors="clr-namespace:bytePassion.OnkoTePla.Client.WPFVisualization.Behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="200">
	
	<UserControl.Resources>
		<converter:OperatingModeToBackgroundBrush x:Key="OperatingModeToBackgroundBrush"/>
		<converter:OperatingModeToVisibilityConverter x:Key="OperatingModeToVisibilityConverter"/>
	</UserControl.Resources>
	
	<d:UserControl.DataContext>
		<sampleData:AppointmentViewModelSampleData/>
	</d:UserControl.DataContext>
	
	<Border>
        <Border.Style>
            <Style TargetType="{x:Type Border}">
                
                <Style.Triggers>
                    <DataTrigger Binding="{Binding OperatingMode}" Value="OperatingMode.Edit">
                        <Setter Property="Opacity" Value="0.7"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>

		<i:Interaction.Behaviors>
			<behaviors:ExecuteCommandOnClickBehavior Command="{Binding SwitchToEditMode}"/>
		</i:Interaction.Behaviors>
		
        <Grid>
           <Grid.ColumnDefinitions>
               <ColumnDefinition Width="30"></ColumnDefinition>
               <ColumnDefinition></ColumnDefinition>
           </Grid.ColumnDefinitions>
            <Border Grid.Column="0" BorderThickness="2,2,0,2" BorderBrush="#404148" Background="#0ead9a"></Border>
            <Border Grid.Column="1" BorderThickness="2" BorderBrush="#404148" Background="#ecf0f1">
                <TextBlock 
					   Foreground="Black" 
                       TextTrimming="CharacterEllipsis"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"
					   FontSize="18"
					   Text="{Binding PatientDisplayName}" FontFamily="Segoe UI Semibold"/>
            </Border>
            <Button Command="{Binding DeleteAppointment}"
					Visibility="{Binding OperatingMode, Converter={StaticResource OperatingModeToVisibilityConverter}}">
                <Button.Template>
                    <ControlTemplate>
                        <Grid>
                            <Ellipse Width="24"
									 Height="24"
									 Fill="White"></Ellipse>
                            <Viewbox Width="24" 
									 Height="24">
                                <Path Data="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,
											2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,
											15.59L13.41,12L17,8.41L15.59,7Z" 
									  Fill="Red" />
                            </Viewbox>
                        </Grid>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>

	</Border>
</UserControl>
